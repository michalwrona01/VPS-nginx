upstream wallet {
    server wallet_web:8000;
}

upstream receiptapi {
    server receiptapi_web:8001;
}

upstream claser {
    server claser_web:8002;
}

upstream bandmanager {
    server bandmanager_web:8003;
}

upstream thalos {
    server thalos_web:8004;
}

server {
    listen 80;
    listen [::]:80;
    server_name receiptapi.wronamichal.pl;

    location / {
        proxy_pass http://receiptapi;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $host;
        proxy_redirect off;
    }
}

server {
    listen 80;
    listen [::]:80;
    server_name claser.wronamichal.pl;

    location / {
        proxy_pass http://claser;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $host;
        proxy_redirect off;
    }
}

server {
    listen 80;
    listen [::]:80;
    server_name bandmanager.wronamichal.pl;

    location / {
        proxy_pass http://bandmanager;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $host;
        proxy_redirect off;
    }
}

server {
    listen 80;
    listen [::]:80;
    server_name walletapi.wronamichal.pl;

    location / {
        proxy_pass http://wallet;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $host;
        proxy_redirect off;
    }
}

server {
    listen 80;
    listen [::]:80;
    server_name thalos.software;

    location / {
        proxy_pass http://thalos;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $host;
        proxy_redirect off;
    }

    location /media/upload_thumbnails/ {
        alias /root/www/ThalosCinemaSystem/mediafiles/upload_thumbnails;
    }
}

server {
    listen 80;
    listen [::]:80;
    server_name github.wronamichal.pl;
    return 301 http://github.com/michalwrona01$request_uri;
}

server {
    listen 80;
    listen [::]:80;
    server_name wronamichal.pl;
    return 301 https://pl.linkedin.com/in/michalwrona01?trk=people-guest_people_search-card/$request_uri;
}
